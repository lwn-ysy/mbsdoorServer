(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1114a2f4"],{"1cb4":function(e,t,a){},"8f6a":function(e,t,a){"use strict";a("1cb4")},d78e:function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("el-table",{staticStyle:{width:"100%"},attrs:{stripe:"",data:e.tableData.filter((function(t){return!e.search||t.nickname.toLowerCase().includes(e.search.toLowerCase())}))}},[a("el-table-column",{attrs:{label:"账号",prop:"account"}}),a("el-table-column",{attrs:{label:"昵称",prop:"nickname"}}),a("el-table-column",{attrs:{label:"权限",prop:"rolename","min-width":"220px"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.rolename,(function(t){return a("el-tag",{key:t,staticClass:"role-tableItem",attrs:{type:"success"}},[e._v(e._s(t))])}))}}])}),a("el-table-column",{attrs:{align:"right","min-width":"220px"},scopedSlots:e._u([{key:"header",fn:function(t){return[a("el-input",{attrs:{size:"mini",placeholder:"输入关键字搜索"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})]}},{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){return e.goUpdateDialog(t.row)}}},[e._v("更新权限")]),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.goDeleteDialog(t.row)}}},[e._v("清空所有权限")])]}}])})],1),a("el-dialog",{attrs:{title:e.formLableTitle,visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{attrs:{model:e.form}},[a("el-form-item",{attrs:{label:"账号","label-width":e.formLabelWidth}},[a("el-input",{attrs:{disabled:"","suffix-icon":"el-icon-date"},model:{value:e.form.account,callback:function(t){e.$set(e.form,"account",t)},expression:"form.account"}})],1),a("el-form-item",{attrs:{label:"昵称","label-width":e.formLabelWidth}},[a("el-input",{attrs:{"suffix-icon":"el-icon-date",disabled:""},model:{value:e.form.nickname,callback:function(t){e.$set(e.form,"nickname",t)},expression:"form.nickname"}})],1),a("el-form-item",{attrs:{label:"权限","label-width":e.formLabelWidth}},[a("el-checkbox-group",{attrs:{size:"small"},model:{value:e.form.roleID,callback:function(t){e.$set(e.form,"roleID",t)},expression:"form.roleID"}},[a("el-checkbox",{staticClass:"role-fromItem",attrs:{label:1,border:""}},[e._v("admin")]),a("el-checkbox",{staticClass:"role-fromItem",attrs:{label:2,border:""}},[e._v("editor")]),a("el-checkbox",{staticClass:"role-fromItem",attrs:{label:3,border:""}},[e._v("tourist")])],1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.handleUpdate()}}},[e._v("确 定")])],1)],1),a("el-dialog",{attrs:{title:"删除提示",visible:e.dialogVisble,width:"30%",center:""},on:{"update:visible":function(t){e.dialogVisble=t}}},[a("div",[e._v("确认要清空所有权限？")]),a("div",{staticClass:"mgl-10 mgtb-10"},[e._v("账号："+e._s(this.deleteData.account))]),a("div",{staticClass:"mgl-10"},[e._v(" 已有权限： "),e._l(this.deleteData.rolename,(function(t){return a("el-tag",{key:t,staticClass:"role-tableItem",attrs:{type:"success"}},[e._v(e._s(t))])}))],2),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisble=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.hanldeDelete()}}},[e._v("确 定")])],1)])],1)},o=[],i=a("1da1"),r=a("5530"),n=(a("96cf"),a("b775"));function s(){return Object(n["a"])({url:"/vue-admin-template/role",method:"get"})}function c(e){return Object(n["a"])({url:"/vue-admin-template/role",method:"delete",params:{userID:e}})}function u(e){return Object(n["a"])({url:"/vue-admin-template/role",method:"put",data:e})}var d={name:"RolePermission",data:function(){return{tableData:[{userID:"123456",account:"admin",nickname:"林伟楠",rolenames:["admin","editor"],roleID:[1,2]},{userID:"123456",account:"admin",nickname:"林伟楠",rolenames:["admin","editor","tourist"],roleID:[1,2,3]}],search:"",tableLoading:!0,dialogFormVisible:!1,form:{userID:"",account:"",nickname:"",rolenames:[],roleID:[]},formLabelWidth:"120px",passwordDisabled:!0,formLableTitle:"权限更改",dialogVisble:!1,deleteData:{userID:"",roleID:[]}}},methods:{refreshTableData:function(){var e=this;this.tableLoading=!0,s().then((function(t){e.tableData=t.data,e.tableLoading=!1}))},goUpdateDialog:function(e){this.form=Object(r["a"])({},e),this.passwordDisabled=!0,this.formLableTitle="权限更新",this.dialogFormVisible=!0},goDeleteDialog:function(e){this.dialogVisble=!0,this.deleteData=Object(r["a"])({},e)},handleUpdate:function(){var e=this;u(this.form).then((function(t){2e4===t.code&&(e.$notify({title:"成功",message:"账号：".concat(e.form.account,"已编辑成功"),type:"success"}),e.dialogFormVisible=!1,e.refreshTableData())}))},hanldeDelete:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,c(e.deleteData.userID);case 2:e.$notify({title:"成功",message:"账号：".concat(e.deleteData.account,"删除成功。"),type:"success"}),e.dialogVisble=!1,e.deleteData={},e.refreshTableData();case 6:case"end":return t.stop()}}),t)})))()}},mounted:function(){this.refreshTableData()}},m=d,f=(a("8f6a"),a("2877")),b=Object(f["a"])(m,l,o,!1,null,"5731eb4b",null);t["default"]=b.exports}}]);