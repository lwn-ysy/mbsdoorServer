(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f37457e4"],{"01da":function(t,e,a){},"14f7":function(t,e,a){},1806:function(t,e,a){"use strict";a("14f7")},"1cb9":function(t,e,a){"use strict";var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[a("el-drawer",{attrs:{title:"微信小程序-界面示例",visible:t.drawer},on:{"update:visible":function(e){t.drawer=e}}},[a("el-image",{attrs:{src:t.picUrl,fit:"contain","preview-src-list":new Array(t.picUrl)}})],1),a("div",{staticClass:"btn-wrapper"},[a("el-button",{attrs:{type:"primary",icon:"el-icon-right",circle:""},on:{click:t.change}})],1)],1)},i=[],n={name:"PageExample",data:function(){return{picUrl:"https://mbsdoor.com:5000/static/image/wx/page-example.png",drawer:!1}},methods:{change:function(){this.drawer=!this.drawer}}},o=n,l=(a("ba40"),a("2877")),s=Object(l["a"])(o,r,i,!1,null,"2854a8e6",null);e["a"]=s.exports},"4d9f":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[a("page-example"),a("form-table",{attrs:{hanldeSubmit:t.handleApi,initForm:t.initFormData,coverFileList:t.coverImage,galaryFileList:t.galaryImage,isAdd:!1}})],1)},i=[],n=a("1da1"),o=(a("96cf"),a("d81d"),a("e692")),l=a("1cb9"),s=a("55eb"),c={name:"UpadteShop",components:{FormTable:s["a"],PageExample:l["a"]},props:{shopID:{type:String,required:!0}},data:function(){return{initFormData:{title:"",categoryID:void 0,des:"",tagID:[]},coverImage:[],galaryImage:[],galaryUpload:[]}},computed:{handleApi:function(){return o["e"]}},methods:{getInitFormData:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){var a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(o["d"])({shopID:t.shopID});case 2:a=e.sent,r=a.data[0],console.log("数据：",a),t.initFormData={title:r.title,categoryID:r.categoryID,des:r.des,tagID:r.tagID,shopID:r.shopID},t.coverImage.push({url:r.coverPicUrl}),t.galaryImage=r.imageurl.map((function(t){return{url:t}}));case 8:case"end":return e.stop()}}),e)})))()}},mounted:function(){this.getInitFormData()}},u=c,d=a("2877"),p=Object(d["a"])(u,r,i,!1,null,null,null);e["default"]=p.exports},"55eb":function(t,e,a){"use strict";var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"addform-container"},[a("div",{staticClass:"form"},[a("el-form",{attrs:{model:t.initForm}},[a("el-form-item",{attrs:{label:"商品名称","label-width":t.formLabelWidth}},[a("el-input",{staticClass:"el-input",attrs:{placeholder:"例如：DR-A023吉祥如意","suffix-icon":"el-icon-date"},model:{value:t.initForm.title,callback:function(e){t.$set(t.initForm,"title",e)},expression:"initForm.title"}})],1),a("el-form-item",{attrs:{label:"品类","label-width":t.formLabelWidth}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.initForm.categoryID,callback:function(e){t.$set(t.initForm,"categoryID",e)},expression:"initForm.categoryID"}},t._l(t.categoryOptions,(function(t){return a("el-option",{key:t.categoryID,attrs:{value:t.categoryID,label:t.categoryname}})})),1)],1),a("el-form-item",{attrs:{label:"标签","label-width":t.formLabelWidth}},[a("el-checkbox-group",{attrs:{max:2},model:{value:t.initForm.tagID,callback:function(e){t.$set(t.initForm,"tagID",e)},expression:"initForm.tagID"}},t._l(t.tagOptions,(function(e){return a("el-checkbox",{key:e.tagID,attrs:{label:e.tagID}},[t._v(t._s(e.tagname))])})),1),a("div",{staticClass:"tip"},[a("el-alert",{staticClass:"title",attrs:{title:"限制最多2个标签",type:"info","show-icon":""}})],1)],1),a("el-form-item",{attrs:{label:"商品描述","label-width":t.formLabelWidth}},[a("el-input",{staticClass:"el-input",attrs:{placeholder:"特性、特点，简单概括",maxlength:40,"suffix-icon":"el-icon-date"},model:{value:t.initForm.des,callback:function(e){t.$set(t.initForm,"des",e)},expression:"initForm.des"}})],1),a("el-form-item",{attrs:{label:"封面图","label-width":t.formLabelWidth}},[a("el-upload",{ref:"upload",attrs:{action:"#","list-type":"picture-card","auto-upload":!1,limit:1,"on-exceed":t.onExceed,"on-remove":t.coverRemove,"on-preview":t.coverPreview,"http-request":t.httpRequest,"file-list":t.coverFileList,accept:"image/*"}},[a("i",{staticClass:"el-icon-plus",attrs:{slot:"default"},slot:"default"}),a("div",{staticClass:"tip el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[a("el-alert",{attrs:{title:"封面图标准是415*295像素，用这个比例的图片能完整显示",type:"info","show-icon":""}})],1)]),a("el-dialog",{attrs:{visible:t.coverVisible},on:{"update:visible":function(e){t.coverVisible=e}}},[a("img",{attrs:{width:"100%",src:t.coverImageUrl,alt:""}})])],1),a("el-form-item",{attrs:{label:"图片集","label-width":t.formLabelWidth}},[a("el-upload",{ref:"galaryUpload",attrs:{action:"https://mbsdoor.com:5000/vue-admin-template/shop/galary","list-type":"picture-card","on-success":t.onSuccess,"on-remove":t.galaryRemove,"on-preview":t.galaryPreview,"file-list":t.galaryFileList,accept:"image/*"}},[a("i",{staticClass:"el-icon-plus",attrs:{slot:"default"},slot:"default"}),a("div",{staticClass:"tip el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[a("el-alert",{attrs:{title:"商品详情页，展示这组图片",type:"info","show-icon":""}})],1)]),a("el-dialog",{attrs:{visible:t.galaryVisible},on:{"update:visible":function(e){t.galaryVisible=e}}},[a("img",{attrs:{width:"100%",src:t.galaryImageUrl,alt:""}})])],1),a("el-form-item",[a("div",{staticClass:"btn-wrapper"},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.handleAdd()}}},[t._v("提 交")]),a("el-button",{on:{click:function(e){return t.resetForm()}}},[t._v("重 置")])],1)])],1)],1)])},i=[],n=a("5530"),o=(a("d81d"),a("c405")),l=a("d28d"),s=a("e692"),c={name:"FormTable",props:{hanldeSubmit:{type:Function,required:!0},initForm:{type:Object,required:!1,default:function(){return{title:"",categoryID:void 0,des:"",tagID:[],shopID:""}}},coverFileList:{type:Array,required:!1},galaryFileList:{type:Array,required:!1},isAdd:{type:Boolean,required:!1,default:function(){return!0}}},data:function(){return{formLabelWidth:"100px",categoryOptions:[],tagOptions:[],coverImageUrl:"",coverVisible:!1,deleteIconDisable:!1,galaryImageUrl:"",galaryVisible:!1,galaryDeleteIcon:!1}},methods:{getImageurl:function(){var t=this.$refs.galaryUpload.uploadFiles.map((function(t){return t.response?t.response.data:t.url}));return t},coverRemove:function(t,e){console.log(this.$refs.upload),console.log("cover:",t,e)},coverPreview:function(t){this.coverImageUrl=t.url,this.coverVisible=!0},httpRequest:function(t){var e=this,a=new FormData,r=this.getImageurl();a.append("file",t.file),a.append("title",this.initForm.title),a.append("des",this.initForm.des),a.append("categoryID",this.initForm.categoryID),a.append("tagID",this.initForm.tagID),a.append("shopID",this.initForm.shopID),a.append("imageurl",r),this.hanldeSubmit(a).then((function(t){2e4===t.code&&e.$confirm("商品名称：".concat(e.initForm.title," 操作成功。跳转到商品界面？"),{title:"操作成功",confirmButtonText:"跳转商品界面",cancelButtonText:"暂不",type:"success"}).then((function(){e.$router.push("/shop/page")})).catch((function(){console.log("停留在此界面")}))}))},onExceed:function(){this.$message("一张就够了哦。您可先删除前面，再添加新的。")},resetForm:function(){this.form={title:"",categoryID:void 0,des:"",tagID:[]},this.$refs.upload.uploadFiles=[],this.$refs.galaryUpload.uploadFiles=[]},handleAdd:function(){var t=this;if(!0===this.isAdd){if(0===this.$refs.upload.uploadFiles.length)return void this.$message.error("需要添加一张封面图哦");this.$refs.upload.submit()}else{var e=this.$refs.upload.uploadFiles.some((function(t){return"ready"===t.status}));if(e)this.$refs.upload.submit();else{var a=this.getImageurl();Object(s["f"])(Object(n["a"])(Object(n["a"])({},this.initForm),{},{imageurl:a})).then((function(e){2e4===e.code&&t.$confirm("商品名称：".concat(t.initForm.title," 更新成功。跳转到商品界面？"),{title:"操作成功",confirmButtonText:"跳转商品界面",cancelButtonText:"暂不",type:"success"}).then((function(){t.$router.push("/shop/page")})).catch((function(){console.log("停留在此界面")}))}))}}},galaryRemove:function(t,e){var a=void 0;a=t.response?t.response.data:t.url,Object(s["b"])(a).then((function(t){2e4===t.code&&console.log("图片删除成功")}))},galaryPreview:function(t){this.galaryImageUrl=t.url,this.galaryVisible=!0},onSuccess:function(t,e,a){}},mounted:function(){var t=this;Object(o["c"])().then((function(e){return t.categoryOptions=e.data})),Object(l["c"])().then((function(e){return t.tagOptions=e.data}))}},u=c,d=(a("1806"),a("2877")),p=Object(d["a"])(u,r,i,!1,null,null,null);e["a"]=p.exports},ba40:function(t,e,a){"use strict";a("01da")},c405:function(t,e,a){"use strict";a.d(e,"c",(function(){return i})),a.d(e,"a",(function(){return n})),a.d(e,"b",(function(){return o})),a.d(e,"d",(function(){return l}));var r=a("b775");function i(){return Object(r["a"])({url:"/vue-admin-template/shop/category",method:"get"})}function n(t){return Object(r["a"])({url:"/vue-admin-template/shop/category",method:"post",data:t})}function o(t){return Object(r["a"])({url:"/vue-admin-template/shop/category",method:"delete",params:{categoryID:t}})}function l(t){return Object(r["a"])({url:"/vue-admin-template/shop/category",method:"put",data:t})}},d28d:function(t,e,a){"use strict";a.d(e,"c",(function(){return i})),a.d(e,"a",(function(){return n})),a.d(e,"b",(function(){return o})),a.d(e,"d",(function(){return l}));var r=a("b775");function i(){return Object(r["a"])({url:"/vue-admin-template/shop/tag",method:"get"})}function n(t){return Object(r["a"])({url:"/vue-admin-template/shop/tag",method:"post",data:t})}function o(t){return Object(r["a"])({url:"/vue-admin-template/shop/tag",method:"delete",params:{tagID:t}})}function l(t){return Object(r["a"])({url:"/vue-admin-template/shop/tag",method:"put",data:t})}},e692:function(t,e,a){"use strict";a.d(e,"d",(function(){return i})),a.d(e,"a",(function(){return n})),a.d(e,"c",(function(){return o})),a.d(e,"e",(function(){return l})),a.d(e,"f",(function(){return s})),a.d(e,"b",(function(){return c}));var r=a("b775");function i(t){return Object(r["a"])({url:"/vue-admin-template/shop/page",method:"get",params:t})}function n(t){return Object(r["a"])({url:"/vue-admin-template/shop/page",method:"post",data:t})}function o(t){return Object(r["a"])({url:"/vue-admin-template/shop/page",method:"delete",params:{shopID:t}})}function l(t){return Object(r["a"])({url:"/vue-admin-template/shop/page",method:"put",data:t})}function s(t){return Object(r["a"])({url:"/vue-admin-template/shop/noimage",method:"put",data:t})}function c(t){return Object(r["a"])({url:"/vue-admin-template/shop/galary",method:"delete",params:{servePath:t}})}}}]);